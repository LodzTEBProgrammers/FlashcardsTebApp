<div *ngIf="flashcardSet">
  <h1>{{ flashcardSet?.title }}</h1>
  <p>{{ flashcardSet?.description }}</p>
  <div *ngIf="!showSummary">
    <div class="flashcard" (click)="flipCard()">
      <div class="flashcard-inner" [class.flipped]="flipped[currentIndex]">
        <div class="flashcard-front">
          <p><strong>Pojęcie:</strong> {{ flashcardSet.flashcards[currentIndex].term }}</p>
        </div>
        <div class="flashcard-back">
          <p><strong>Definicja:</strong> {{ flashcardSet.flashcards[currentIndex].definition }}</p>
          <p class="shortcut-info">
            <i class="bi bi-keyboard"></i> Skrót klawiszowy: Naciśnij spację lub kliknij na fiszkę, aby ją obrócić
          </p>
        </div>
      </div>
    </div>
    <div class="navigation">
      <button (click)="markAsUnknown()" class="btn btn-outline-danger">❌</button>
      <span>{{ currentIndex + 1 }} / {{ flashcardSet.flashcards.length }}</span>
      <button (click)="markAsKnown()" class="btn btn-outline-success">✅</button>
    </div>
  </div>
  <div *ngIf="showSummary" class="summary">
    <h2>{{ getProgressMessage() }}</h2>
    <p>Twoje postępy</p>
    <div *ngIf="getProgressPercentage() === 100; else progressChart">
      <svg viewBox="0 0 36 36" class="circular-chart">
        <path class="circle-bg"
              d="M18 2.0845
                 a 15.9155 15.9155 0 0 1 0 31.831
                 a 15.9155 15.9155 0 0 1 0 -31.831" />
        <path class="circle correct"
              stroke-dasharray="100, 100"
              d="M18 2.0845
                 a 15.9155 15.9155 0 0 1 0 31.831
                 a 15.9155 15.9155 0 0 1 0 -31.831" />
        <svg x="9" y="9" viewBox="0 0 100 100" width="18" height="18">
          <path fill="none" stroke="#59E8B5" stroke-width="4" d="M72.553 46.505c0-1.014-.394-1.99-1.1-2.718l-.021-.02a3.826 3.826 0 0 0-5.366 0L50.98 59.321l-4.307-4.424-.02-.02a3.825 3.825 0 0 0-5.366 0l-.02.021a3.9 3.9 0 0 0 .001 5.436l7.01 7.202a3.78 3.78 0 0 0 2.709 1.148 3.76 3.76 0 0 0 2.709-1.149l17.756-18.314a3.9 3.9 0 0 0 1.1-2.718">
            <animate attributeName="stroke-dasharray" from="0,100" to="100,0" dur="1.7s" fill="freeze" />
          </path>
        </svg>
      </svg>
    </div>
    <ng-template #progressChart>
      <svg viewBox="0 0 36 36" class="circular-chart">
        <path class="circle-bg"
              d="M18 2.0845
             a 15.9155 15.9155 0 0 1 0 31.831
             a 15.9155 15.9155 0 0 1 0 -31.831" />
        <path class="circle correct"
              [attr.stroke-dasharray]="getProgressPercentage() + ', 100'"
              d="M18 2.0845
             a 15.9155 15.9155 0 0 1 0 31.831
             a 15.9155 15.9155 0 0 1 0 -31.831" />
        <path class="circle incorrect"
              [attr.stroke-dasharray]="(100 - getProgressPercentage()) + ', 100'"
              [attr.stroke-dashoffset]="getProgressPercentage()"
              d="M18 2.0845
             a 15.9155 15.9155 0 0 1 0 31.831
             a 15.9155 15.9155 0 0 1 0 -31.831" />
        <path *ngIf="getProgressPercentage() === 100"
              d="M10 18l5 5l10-10" />
        <text x="18" y="20.35" class="percentage">{{ getProgressPercentage() }}%</text>
      </svg>
    </ng-template>
    <p>Umiem: {{ getKnownCount() }}</p>
    <p>Wciąż się uczę: {{ getUnknownCount() }}</p>
    <p>Liczba pozostałych pojęć: {{ getRemainingCount() }}</p>
    <button (click)="resetFlashcards()" class="btn">Zresetuj fiszki</button>
    <button (click)="practiceWithQuestions($event)" class="btn practice-btn">
      Ćwicz z pytaniami
    </button>
  </div>
  <button (click)="editFlashcardSet()" class="btn btn-primary">Edytuj zestaw</button>
</div>
